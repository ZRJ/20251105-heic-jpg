
# HEIC 转 JPG 批量转换工具

一个用于批量将 HEIC/HEIF 图片格式转换为 JPG 格式的工具，提供图形界面和命令行两种使用方式。

## 项目简介

本项目包含两个版本的 HEIC 转 JPG 转换工具：

1. **图形界面版本** (`win_heic_to_jpg.py`): 提供直观的用户界面，支持可视化操作
2. **命令行版本** (`cmd_heic_to_jpg.py`): 适合批处理和自动化场景

两个版本都基于 Python 的 Pillow 库和 pillow-heif 插件实现，能够高效处理 HEIC/HEIF 格式的图片转换。

## 功能特点

### 图形界面版本
- 🖼️ 直观的图形用户界面
- 📁 支持选择源目录和输出目录
- 🎚️ 可调节 JPG 输出质量（1-100）
- ✅ 支持保持原文件名或使用新命名
- 🗑️ 可选转换后删除原 HEIC 文件
- 📊 实时显示转换进度和状态
- ❌ 支持中途取消转换

### 命令行版本
- 💻 简洁的命令行操作
- 🚀 快速批量转换
- 📁 自动递归处理子目录
- 📝 详细的转换日志输出
- ⚙️ 可自定义目标目录

## 安装依赖

在运行程序前，请确保安装了必要的 Python 依赖库：

```bash
pip install pillow pillow-heif
```

## 使用说明

### 图形界面版本

1. 直接运行图形界面程序：
   ```bash
   python win_heic_to_jpg.py
   ```

2. 操作步骤：
   - 点击"浏览..."选择包含 HEIC 文件的源目录
   - 选择输出 JPG 文件的目录（默认为源目录）
   - 调整 JPG 质量和其他选项
   - 点击"开始转换"按钮
   - 等待转换完成，过程中可以随时取消

### 命令行版本

1. 编辑 `cmd_heic_to_jpg.py` 文件，修改 `target_dir` 变量为你的目标目录路径：
   ```python
   target_dir = r"E:\你的图片目录"  # 修改为你的目录路径
   ```

2. 运行命令行程序：
   ```bash
   python cmd_heic_to_jpg.py
   ```

3. 程序会自动：
   - 递归扫描指定目录及其子目录下的所有 `.heic` 文件
   - 将每个 HEIC 文件转换为同名的 JPG 文件
   - 输出转换成功和失败的详细信息
   - 显示转换完成的统计信息

## 打包说明

要将图形界面版本打包为独立的可执行文件（.exe），请按照以下步骤操作：

1. 确保已安装 PyInstaller：
   ```bash
   pip install pyinstaller
   ```

2. 运行打包脚本：
   ```bash
   python build.py
   ```

3. 打包过程：
   - 脚本会自动创建程序图标
   - 使用 PyInstaller 将程序打包为单个 exe 文件
   - 打包完成后，可执行文件位于 `dist/HEIC转JPG转换器.exe`

4. 分发说明：
   - 打包后的 exe 文件可以在任何 Windows 系统上运行，无需安装 Python 环境
   - 文件大小约 30-50MB（包含所有依赖）
   - 建议在分发前在不同 Windows 系统上测试运行

## 文件说明

| 文件名 | 说明 |
|--------|------|
| `win_heic_to_jpg.py` | 图形界面版本主程序 |
| `cmd_heic_to_jpg.py` | 命令行版本主程序 |
| `build.py` | 打包脚本，用于生成 exe 文件 |
| `README.md` | 项目说明文档 |

## 注意事项

1. **Python 版本要求**：需要 Python 3.7 或更高版本
2. **文件覆盖**：如果输出目录中已存在同名 JPG 文件，会被覆盖
3. **删除原文件**：使用图形界面版本的"删除原文件"功能请谨慎操作
4. **杀毒软件**：某些杀毒软件可能会误报打包后的 exe 文件，这是正常现象
5. **HEIC 格式**：程序支持 `.heic`、`.HEIC`、`.heif`、`.HEIF` 格式
6. **转换质量**：默认 JPG 质量为 95，可在图形界面中调整

## 技术实现

- **图形界面**：使用 tkinter 构建，提供直观的用户交互
- **图片处理**：基于 Pillow 库和 pillow-heif 插件实现 HEIC 格式支持
- **批量处理**：使用 pathlib 递归扫描目录，支持大量文件处理
- **多线程**：图形界面版本使用独立线程处理转换，避免界面冻结
- **错误处理**：完善的异常捕获机制，确保程序稳定运行

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。